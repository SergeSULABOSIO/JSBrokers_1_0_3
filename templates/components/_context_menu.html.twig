{#
    Ce template représente le menu contextuel qui apparaît lors d'un clic droit sur une liste.
    Il est piloté par le contrôleur Stimulus `context-menu` (anciennement `list-element-context-menu`).

    Fonctionnement :
    - Ce contrôleur est "passif". Il est initialement caché.
    - Il écoute un événement global (ex: `app:show.context-menu`) pour s'afficher à la position de la souris.
    - Chaque option du menu (`<li>`) déclenche une action qui notifie le "Cerveau" d'une demande spécifique
      (ex: 'ui:context-menu.add-request'). C'est ensuite le contrôleur de liste (`list-manager`) qui exécute l'action.
#}
<nav 
    id="simpleContextMenu" 
    class="context-menu text-secondary" 
    data-controller="context-menu" 
    data-context-menu-target="menu" 
>
    <ul>
        {# Option "Ajouter" #}
        <li 
            data-context-menu-target="btAjouter"
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.add-request"
        >
            {{ include('segments/icones/actions/add.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Ajouter</span>
            <span class="text-muted small">A</span>
        </li>
        {# Option "Ouvrir" #}
        <li 
            data-context-menu-target="btOuvrir"
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.open-request"
        >
            {{ include('segments/icones/actions/open.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Ouvrir</span>
            <span class="text-muted small">O</span>
        </li>
        {# Option "Modifier" #}
        <li 
            data-context-menu-target="btModifier" 
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.edit-request"
        >
            {{ include('segments/icones/actions/edit.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Modifier</span>
            <span class="text-muted small">M</span>
        </li>
        {# Option "Tout Cocher" #}
        <li 
            data-context-menu-target="btToutCocher" 
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.select-all-request"
        >
            {{ include('segments/icones/actions/check.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Tout Cocher</span>
        </li>
        {# Option "Actualiser" #}
        <li 
            data-context-menu-target="btActualiser" 
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.refresh-request"
        >
            {{ include('segments/icones/actions/reload.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Actualiser</span>
            <span class="text-muted small">R</span>
        </li>

        {# Option "Supprimer" #}
        <li
            data-context-menu-target="btSupprimer"
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.delete-request"
        >
            {{ include('segments/icones/actions/delete.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Supprimer</span>
            <span class="text-muted small">S</span>
        </li>

        {# Option "Séparateur" #}
        <li class="separator"></li>

        {# Option "Paramètre" #}
        <li 
            data-context-menu-target="btParametrer" 
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.settings-request"
        >
            {{ include('segments/icones/actions/settings.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Paramètres</span>
        </li>

        {# Option "Quitter" #}
        <li 
            data-context-menu-target="btQuitter" 
            data-action="click->context-menu#notify"
            data-context-menu-event-name-param="ui:toolbar.close-request"
        >
            {{ include('segments/icones/actions/exit.html.twig', {size:'20px'}) }}
            <span class="flex-grow-1">Quitter</span>
            <span class="text-muted small">Q</span>
        </li>
    </ul>
</nav>