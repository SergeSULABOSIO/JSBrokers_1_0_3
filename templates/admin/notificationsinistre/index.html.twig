{% extends 'base.html.twig' %}

{% block title %}
	{{pageName}}
{% endblock %}

{% block section_utilisateur %}
	{% include 'segments/boutons_entreprise_dashbord.html.twig' %}
{% endblock %}

{%  block titreRubrique %}
	{{ utilisateur.nom }}>{{ entreprise.nom }}><strong>{{ pageName }}</strong>
{% endblock %}

{% block descriptionRubrique %}
	{{ "notificationsinistre_description" | trans }}
{% endblock %}

{% block menuLateraleGauche %}
	{% include 'segments/menu_entreprise_dashbord.html.twig' %}
{% endblock %}

{% block body %}
    <div 
        id = "liste" 
        data-controller="dialogue liste-principale" 
        data-liste-principale-identreprise-value={{entreprise.id}} 
        data-liste-principale-idutilisateur-value={{utilisateur.id}} 
        data-liste-principale-nbelements-value={{notificationsinistres|length}} 
        data-liste-principale-rubrique-value="Notificaton Sinistre" 
        data-liste-principale-controleurphp-value="notificationsinistre" 
        data-liste-principale-controleurstimulus-value="notificationsinistre-formulaire" 
        {# data-liste-principale-controleurstimulusformulaire-value="notificationsinistre-formulaire"  #}
    >
        <div class="shadow-sm sensible bg-white">
            {# Barre d'outils #}
            {{ include("components/_liste_barre_outils.html.twig") }}
            {# Barre des totaux #}
            {{ include('components/_totals_bar.html.twig') }}
            {# Tableau #}
            <table 
                {# L'élément sur lequel l'utilisateur fera un clic droit #}
                class="table table-hover table-sm caption-top p-3"
            >
                <caption>
                    <span data-liste-principale-target = "display">
                        {% if notificationsinistres|length == 0 %}
                            {{ "list_filter_result_empty" | trans}}
                        {% else %}
                            {{ "list_filter_result_elements" | trans({
                                ':number': notificationsinistres|length
                            })}}
                        {% endif %}
                    </span>
                    <div class="d-flex gap-1">
                        {{ knp_pagination_render(notificationsinistres) }}
                    </div>
                </caption>
                {% if notificationsinistres|length != 0 %}
                    <thead class="table-light">
                        <tr class="text-center">
                            <th scope="col">
                                {# Checkbox de selection ici #}
                                <div class="form-check m-2 justify-content-start">
                                    <input 
                                        class="form-check-input" 
                                        value="" 
                                        type="checkbox" 
                                        id="myCheckbox" 
                                        data-action="change->liste-principale#handleItemToutCocher" 
                                        data-liste-principale-target="selectAllCheckbox"
                                    >
                                    <label 
                                        for="myCheckbox"
                                        class="text-secondary" 
                                    >
                                        Id.  
                                    </label>
                                </div>
                            </th>
                            <th scope="col">
                                <div class='d-flex justify-content-start text-secondary m-2'>
                                    {{ "list_of_object" | trans }}
                                </div>
                            </th>
                            <th scope="col" style="width:100px" >
                                <div class='d-flex justify-content-end'>
                                    {# {{ "note_list_actions" | trans }} #}
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider context-target" data-liste-principale-target = "donnees">
                        {{ include('admin/notificationsinistre/donnees.html.twig') }}
                    </tbody>
                {% endif %}
            </table>
        </div>
        {{ include('admin/notificationsinistre/menu_contextuel.html.twig') }}
        {{ include('components/_dialogue.html.twig') }}
    </div>
{% endblock %}
