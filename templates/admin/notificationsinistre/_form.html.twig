{{ form_start(form) }}
    {% if entityFormCanvas.parametres.form_layout is defined and entityFormCanvas.parametres.form_layout is not empty %}
        {% for row in entityFormCanvas.parametres.form_layout %}
            {% set row_style = (row.couleur_fond is defined and row.couleur_fond) ? 'background-color: ' ~ row.couleur_fond ~ ';' : '' %}
            {% set row_class = (row.couleur_fond is defined and row.couleur_fond) ? 'form-row-colored' : '' %}
            <div class="row gx-3 {{ row_class }}" style="{{ row_style }}">
                {% set col_class = 'col-md-' ~ (12 / row.colonnes|length)|round(0, 'floor') %}
                {% for col in row.colonnes %}
                    <div class="{{ col_class }}">
                        {% for field_code in col.champs %}
                            {% if form[field_code] is defined %}
                                {{ form_row(form[field_code]) }}
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    {% else %}
        {{ form_widget(form) }}
    {% endif %}
    {{ form_rest(form) }}
{{ form_end(form) }}